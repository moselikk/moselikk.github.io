<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <title>
    ElementUI 多页表格打印无表头
  </title>
  <meta
    name="description"
    content="开发审批记录类系统过程中，使用者对于列表打印功能要求较多，虽然现在公司都为线上审批无纸化办公，但是难免还是会有需要将系统中的数据打印出来进行签字的需求，在传统制造业尤为明显。在自测过程中发现使用 Vue 加 element-ui 开发的产品，在打印长表格时打印多页会出现只有第一页有表头的情况。在 HTML 中原生..."
  />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link
    rel="canonical"
    href="https://moselikk.com/blog/ElementUI"
  />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
  <link rel="stylesheet" href="/css/main.css">
  <link rel="alternate" type="application/rss+xml" title="moselikk"
  href="https://moselikk.com/feed.xml">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>ElementUI 多页表格打印无表头 | moselikk</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="ElementUI 多页表格打印无表头" />
<meta name="author" content="Moselikk" />
<meta property="og:locale" content="zh_cmn_Hans" />
<meta name="description" content="开发审批记录类系统过程中，使用者对于列表打印功能要求较多，虽然现在公司都为线上审批无纸化办公，但是难免还是会有需要将系统中的数据打印出来进行签字的需求，在传统制造业尤为明显。在自测过程中发现使用 Vue 加 element-ui 开发的产品，在打印长表格时打印多页会出现只有第一页有表头的情况。 在 HTML 中原生 table 表头若是用 thead 写，那打印时会自动优化将每页纸都加上表头，排查发现，element-ui 的表格组件为了实现表头浮动，将表头和表格内容部分分别放在两个 table 里且包在了两个 div 里，致使打印时无法自动为后续页添加表头 解决思路 通过在打印时将原本的 thead 结构隐藏，并复制一份与 tbody 放在同一个 table 中，即可实现目标功能 复制结构： /* index.vue el-table标签 ref=&quot;mytable&quot; */ &lt;script&gt; export default{ // ... mounted() { this.$nextTick(() =&gt; { let thead = this.$refs.mytable.$el.querySelector(&#39;.el-table__header-wrapper thead&#39;) let theadNew = thead.cloneNode(true) this.$refs.mytable.$el.querySelector(&#39;.el-table__body-wrapper table&#39;).appendChild(theadNew) }) } // ... } &lt;/script&gt; 设置打印时 css 规则： .el-table &gt;&gt;&gt; .el-table__body-wrapper table thead{ display: none; } @media print { .el-table &gt;&gt;&gt; .el-table__header-wrapper{ display: none; } .el-table &gt;&gt;&gt; .el-table__body-wrapper table thead{ display: table-header-group; } } 优化 项目中用到的地方少的话可以在组件中直接书写，若广泛使用，可封装为组件，方便维护 /* el-table-p.vue */ &lt;script&gt; import {Table} from &#39;element-ui&#39; export default{ extends: Table, mounted() { this.$nextTick(() =&gt; { let thead = this.$el.querySelector(&#39;.el-table__header-wrapper thead&#39;) let theadNew = thead.cloneNode(true) this.$el.querySelector(&#39;.el-table__body-wrapper table&#39;).appendChild(theadNew) }) } } &lt;/script&gt; &lt;style scoped&gt; .el-table &gt;&gt;&gt; .el-table__body-wrapper table thead{ display: none; } @media print { .el-table &gt;&gt;&gt; .el-table__header-wrapper{ display: none; } .el-table &gt;&gt;&gt; .el-table__body-wrapper table thead{ display: table-header-group; } } &lt;/style&gt; 注册为全局组件： /* main.js */ import ElTableP from &#39;./components/el-table-p.vue&#39; Vue.component(&#39;el-table-p&#39;, ElTableP) 使用 table 时使用自定义的组件快速方便满足需求: &lt;!--index.js=&gt;template--&gt; &lt;el-table-p :data=&quot;tableData&quot; ref=&quot;mytable&quot; style=&quot;width: 800px; margin:0px auto&quot;&gt; &lt;el-table-column prop=&quot;date&quot; label=&quot;日期&quot; width=&quot;180&quot;&gt; &lt;/el-table-column&gt; &lt;el-table-column prop=&quot;name&quot; label=&quot;姓名&quot; width=&quot;180&quot;&gt; &lt;/el-table-column&gt; &lt;el-table-column prop=&quot;address&quot; label=&quot;地址&quot;&gt; &lt;/el-table-column&gt; &lt;/el-table-p&gt; 实现了每页打印都有表头的效果" />
<meta property="og:description" content="开发审批记录类系统过程中，使用者对于列表打印功能要求较多，虽然现在公司都为线上审批无纸化办公，但是难免还是会有需要将系统中的数据打印出来进行签字的需求，在传统制造业尤为明显。在自测过程中发现使用 Vue 加 element-ui 开发的产品，在打印长表格时打印多页会出现只有第一页有表头的情况。 在 HTML 中原生 table 表头若是用 thead 写，那打印时会自动优化将每页纸都加上表头，排查发现，element-ui 的表格组件为了实现表头浮动，将表头和表格内容部分分别放在两个 table 里且包在了两个 div 里，致使打印时无法自动为后续页添加表头 解决思路 通过在打印时将原本的 thead 结构隐藏，并复制一份与 tbody 放在同一个 table 中，即可实现目标功能 复制结构： /* index.vue el-table标签 ref=&quot;mytable&quot; */ &lt;script&gt; export default{ // ... mounted() { this.$nextTick(() =&gt; { let thead = this.$refs.mytable.$el.querySelector(&#39;.el-table__header-wrapper thead&#39;) let theadNew = thead.cloneNode(true) this.$refs.mytable.$el.querySelector(&#39;.el-table__body-wrapper table&#39;).appendChild(theadNew) }) } // ... } &lt;/script&gt; 设置打印时 css 规则： .el-table &gt;&gt;&gt; .el-table__body-wrapper table thead{ display: none; } @media print { .el-table &gt;&gt;&gt; .el-table__header-wrapper{ display: none; } .el-table &gt;&gt;&gt; .el-table__body-wrapper table thead{ display: table-header-group; } } 优化 项目中用到的地方少的话可以在组件中直接书写，若广泛使用，可封装为组件，方便维护 /* el-table-p.vue */ &lt;script&gt; import {Table} from &#39;element-ui&#39; export default{ extends: Table, mounted() { this.$nextTick(() =&gt; { let thead = this.$el.querySelector(&#39;.el-table__header-wrapper thead&#39;) let theadNew = thead.cloneNode(true) this.$el.querySelector(&#39;.el-table__body-wrapper table&#39;).appendChild(theadNew) }) } } &lt;/script&gt; &lt;style scoped&gt; .el-table &gt;&gt;&gt; .el-table__body-wrapper table thead{ display: none; } @media print { .el-table &gt;&gt;&gt; .el-table__header-wrapper{ display: none; } .el-table &gt;&gt;&gt; .el-table__body-wrapper table thead{ display: table-header-group; } } &lt;/style&gt; 注册为全局组件： /* main.js */ import ElTableP from &#39;./components/el-table-p.vue&#39; Vue.component(&#39;el-table-p&#39;, ElTableP) 使用 table 时使用自定义的组件快速方便满足需求: &lt;!--index.js=&gt;template--&gt; &lt;el-table-p :data=&quot;tableData&quot; ref=&quot;mytable&quot; style=&quot;width: 800px; margin:0px auto&quot;&gt; &lt;el-table-column prop=&quot;date&quot; label=&quot;日期&quot; width=&quot;180&quot;&gt; &lt;/el-table-column&gt; &lt;el-table-column prop=&quot;name&quot; label=&quot;姓名&quot; width=&quot;180&quot;&gt; &lt;/el-table-column&gt; &lt;el-table-column prop=&quot;address&quot; label=&quot;地址&quot;&gt; &lt;/el-table-column&gt; &lt;/el-table-p&gt; 实现了每页打印都有表头的效果" />
<link rel="canonical" href="https://moselikk.com/blog/ElementUI" />
<meta property="og:url" content="https://moselikk.com/blog/ElementUI" />
<meta property="og:site_name" content="moselikk" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-06-18T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="ElementUI 多页表格打印无表头" />
<meta name="google-site-verification" content="" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Moselikk"},"dateModified":"2021-06-18T00:00:00+08:00","datePublished":"2021-06-18T00:00:00+08:00","description":"开发审批记录类系统过程中，使用者对于列表打印功能要求较多，虽然现在公司都为线上审批无纸化办公，但是难免还是会有需要将系统中的数据打印出来进行签字的需求，在传统制造业尤为明显。在自测过程中发现使用 Vue 加 element-ui 开发的产品，在打印长表格时打印多页会出现只有第一页有表头的情况。 在 HTML 中原生 table 表头若是用 thead 写，那打印时会自动优化将每页纸都加上表头，排查发现，element-ui 的表格组件为了实现表头浮动，将表头和表格内容部分分别放在两个 table 里且包在了两个 div 里，致使打印时无法自动为后续页添加表头 解决思路 通过在打印时将原本的 thead 结构隐藏，并复制一份与 tbody 放在同一个 table 中，即可实现目标功能 复制结构： /* index.vue el-table标签 ref=&quot;mytable&quot; */ &lt;script&gt; export default{ // ... mounted() { this.$nextTick(() =&gt; { let thead = this.$refs.mytable.$el.querySelector(&#39;.el-table__header-wrapper thead&#39;) let theadNew = thead.cloneNode(true) this.$refs.mytable.$el.querySelector(&#39;.el-table__body-wrapper table&#39;).appendChild(theadNew) }) } // ... } &lt;/script&gt; 设置打印时 css 规则： .el-table &gt;&gt;&gt; .el-table__body-wrapper table thead{ display: none; } @media print { .el-table &gt;&gt;&gt; .el-table__header-wrapper{ display: none; } .el-table &gt;&gt;&gt; .el-table__body-wrapper table thead{ display: table-header-group; } } 优化 项目中用到的地方少的话可以在组件中直接书写，若广泛使用，可封装为组件，方便维护 /* el-table-p.vue */ &lt;script&gt; import {Table} from &#39;element-ui&#39; export default{ extends: Table, mounted() { this.$nextTick(() =&gt; { let thead = this.$el.querySelector(&#39;.el-table__header-wrapper thead&#39;) let theadNew = thead.cloneNode(true) this.$el.querySelector(&#39;.el-table__body-wrapper table&#39;).appendChild(theadNew) }) } } &lt;/script&gt; &lt;style scoped&gt; .el-table &gt;&gt;&gt; .el-table__body-wrapper table thead{ display: none; } @media print { .el-table &gt;&gt;&gt; .el-table__header-wrapper{ display: none; } .el-table &gt;&gt;&gt; .el-table__body-wrapper table thead{ display: table-header-group; } } &lt;/style&gt; 注册为全局组件： /* main.js */ import ElTableP from &#39;./components/el-table-p.vue&#39; Vue.component(&#39;el-table-p&#39;, ElTableP) 使用 table 时使用自定义的组件快速方便满足需求: &lt;!--index.js=&gt;template--&gt; &lt;el-table-p :data=&quot;tableData&quot; ref=&quot;mytable&quot; style=&quot;width: 800px; margin:0px auto&quot;&gt; &lt;el-table-column prop=&quot;date&quot; label=&quot;日期&quot; width=&quot;180&quot;&gt; &lt;/el-table-column&gt; &lt;el-table-column prop=&quot;name&quot; label=&quot;姓名&quot; width=&quot;180&quot;&gt; &lt;/el-table-column&gt; &lt;el-table-column prop=&quot;address&quot; label=&quot;地址&quot;&gt; &lt;/el-table-column&gt; &lt;/el-table-p&gt; 实现了每页打印都有表头的效果","headline":"ElementUI 多页表格打印无表头","mainEntityOfPage":{"@type":"WebPage","@id":"https://moselikk.com/blog/ElementUI"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://moselikk.com/apple-touch-icon.png"},"name":"Moselikk"},"url":"https://moselikk.com/blog/ElementUI"}</script>
<!-- End Jekyll SEO tag -->

  <script>

  </script>
  <script>
  </script>
</head>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-K329WMFD');</script>
  <!-- End Google Tag Manager -->
<body>
  <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K329WMFD"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
  <div class="outer">
    <div class="page-content" id="article">
      <div class="wrapper">
        <div id="hitokoto" class="hitokoto">
          <a href="#" id="hitokoto_text">...... </a>
        </div>
        <div class="hanging-drop">
        </div>
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
      <header class="post-header">
    <h1 class="post-title" itemprop="name headline">ElementUI 多页表格打印无表头</h1>
    <p class="post-meta">
      <span><svg width="10px" height="10px" style="fill: #888; margin-right: 5px; vertical-align: baseline;" viewBox="0 0 16 16"><path d="M2.06 6.69c.14-.4.5-.69.94-.69h11V5c0-.55-.45-1-1-1H6.41l-1.7-1.71A.997.997 0 0 0 4 2H1c-.55 0-1 .45-1 1v9.84l2.05-6.15h.01zM16 8c0-.55-.45-1-1-1H4a.99.99 0 0 0-.94.69l-2 6c-.04.09-.06.2-.06.31 0 .55.45 1 1 1h11c.44 0 .81-.29.94-.69l2-6c.04-.09.06-.2.06-.31z"></path></svg>
      <time datetime="2021-06-18T00:00:00+08:00" itemprop="datePublished">Jun 18, 2021</time></span>
      <a href="/"><span><svg width="10px" height="10px" style="fill: #888; margin-right: 5px; vertical-align: baseline;" viewBox="0 0 16 16"><path d="M1 3h14c.55 0 1-.45 1-1s-.45-1-1-1H1c-.55 0-1 .45-1 1s.45 1 1 1zm14 10H1c-.55 0-1 .45-1 1s.45 1 1 1h14c.55 0 1-.45 1-1s-.45-1-1-1zm0-4H1c-.55 0-1 .45-1 1s.45 1 1 1h14c.55 0 1-.45 1-1s-.45-1-1-1zm0-4H1c-.55 0-1 .45-1 1s.45 1 1 1h14c.55 0 1-.45 1-1s-.45-1-1-1z"></path></svg>Home</span></a>
      <a href="mailto:moselikk@gmail.com"><span><svg width="10px" height="10px" style="fill: #888; margin-right: 5px; vertical-align: baseline;" viewBox="0 0 16 16"><path d="M6 10c-1.1 0-2-.9-2-2V3H1c-.55 0-1 .45-1 1v8c0 .55.45 1 1 1v2a1.003 1.003 0 0 0 1.71.71L5.41 13H10c.55 0 1-.45 1-1v-1.17l-.83-.83H6zm9-10H6c-.55 0-1 .45-1 1v7c0 .55.45 1 1 1h4.59l2.71 2.71c.17.18.42.29.7.29.55 0 1-.45 1-1V9c.55 0 1-.45 1-1V1c0-.55-.45-1-1-1z"></path></svg>Email</span></a>
      <a href="https://github.com/moselikk"><span><svg width="10px" height="10px" style="fill: #888; margin-right: 5px; vertical-align: baseline;" viewBox="0 0 16 16"><path d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>Github</span></a>
      <a href="/excerpt"><span><svg width="10px" height="10px" style="fill: #888; margin-right: 5px; vertical-align: baseline;" viewBox="0 0 16 16"><path d="M11 11c-.28 0-.53.11-.71.29L9 12.59V8c0-.55-.45-1-1-1s-1 .45-1 1v4.59L5.71 11.3A.965.965 0 0 0 5 11a1.003 1.003 0 0 0-.71 1.71l3 3c.18.18.43.29.71.29s.53-.11.71-.29l3-3A1.003 1.003 0 0 0 11 11zm1-7c-.03 0-.07 0-.1.01A5 5 0 0 0 2 5c0 .11.01.22.02.33A3.51 3.51 0 0 0 0 8.5c0 1.41.84 2.61 2.03 3.17C2.2 10.17 3.46 9 5 9c.06 0 .13.02.19.02C5.07 8.7 5 8.36 5 8c0-1.66 1.34-3 3-3s3 1.34 3 3c0 .36-.07.7-.19 1.02.06 0 .13-.02.19-.02 1.48 0 2.7 1.07 2.95 2.47A3.964 3.964 0 0 0 16 8c0-2.21-1.79-4-4-4z"></path></svg>Excerpt</span></a>
      <a href="/about"><span><svg xmlns="http://www.w3.org/2000/svg" width="10px" height="10px" style="fill: #888; margin-right: 5px; vertical-align: baseline;" viewBox="0 0 16 16"><!-- Icon from Tabler Icons by Paweł Kuna - https://github.com/tabler/tabler-icons/blob/master/LICENSE --><path fill="currentColor" d="M18.333 2c1.96 0 3.56 1.537 3.662 3.472l.005.195v12.666c0 1.96-1.537 3.56-3.472 3.662l-.195.005H5.667a3.667 3.667 0 0 1-3.662-3.472L2 18.333V5.667c0-1.96 1.537-3.56 3.472-3.662L5.667 2zM6 15a1 1 0 0 0-1 1v2l.007.117A1 1 0 0 0 7 18v-2l-.007-.117A1 1 0 0 0 6 15m3-4a1 1 0 0 0-1 1v6l.007.117A1 1 0 0 0 10 18v-6l-.007-.117A1 1 0 0 0 9 11m3 2a1 1 0 0 0-1 1v4l.007.117A1 1 0 0 0 13 18v-4l-.007-.117A1 1 0 0 0 12 13"/></svg>About</span></a>
    </p>
  </header>


  

  <div class="post-content" itemprop="articleBody">
    <p>开发审批记录类系统过程中，使用者对于列表打印功能要求较多，虽然现在公司都为线上审批无纸化办公，但是难免还是会有需要将系统中的数据打印出来进行签字的需求，在传统制造业尤为明显。在自测过程中发现使用 Vue 加 element-ui 开发的产品，在打印长表格时打印多页会出现只有第一页有表头的情况。</p>

<p><img src="https://less-1251975755.cos.ap-beijing.myqcloud.com/posts/2022-08-12%2011.00.22.png" alt="" /></p>

<p><img src="https://less-1251975755.cos.ap-beijing.myqcloud.com/posts/2022-08-12%2011.00.31.png" alt="" /></p>

<p>在 HTML 中原生 table 表头若是用 thead 写，那打印时会自动优化将每页纸都加上表头，排查发现，element-ui 的表格组件为了实现表头浮动，将表头和表格内容部分分别放在两个 table 里且包在了两个 div 里，致使打印时无法自动为后续页添加表头</p>

<p><img src="https://less-1251975755.cos.ap-beijing.myqcloud.com/posts/2022-08-12%2011.11.28.png" alt="" /></p>

<h2 id="解决思路">解决思路</h2>
<p>通过在打印时将原本的 thead 结构隐藏，并复制一份与 tbody 放在同一个 table 中，即可实现目标功能</p>

<p>复制结构：</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/*
index.vue
el-table标签 ref="mytable"
*/</span>
<span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="k">export</span> <span class="k">default</span><span class="p">{</span>
<span class="c1">// ...</span>
  <span class="nf">mounted</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nf">$nextTick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span> 
      <span class="kd">let</span> <span class="nx">thead</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$refs</span><span class="p">.</span><span class="nx">mytable</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nf">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">.el-table__header-wrapper thead</span><span class="dl">'</span><span class="p">)</span>
      <span class="kd">let</span> <span class="nx">theadNew</span> <span class="o">=</span> <span class="nx">thead</span><span class="p">.</span><span class="nf">cloneNode</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">$refs</span><span class="p">.</span><span class="nx">mytable</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nf">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">.el-table__body-wrapper table</span><span class="dl">'</span><span class="p">).</span><span class="nf">appendChild</span><span class="p">(</span><span class="nx">theadNew</span><span class="p">)</span>
    <span class="p">})</span>
  <span class="p">}</span>
<span class="c1">// ...</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></code></pre></div></div>
<p>设置打印时 css 规则：</p>
<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.el-table</span> <span class="o">&gt;&gt;&gt;</span> <span class="nc">.el-table__body-wrapper</span> <span class="nt">table</span> <span class="nt">thead</span><span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
 <span class="p">}</span>
<span class="k">@media</span> <span class="n">print</span> <span class="p">{</span>
  <span class="nc">.el-table</span> <span class="o">&gt;&gt;&gt;</span> <span class="nc">.el-table__header-wrapper</span><span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
  <span class="p">}</span>
 <span class="nc">.el-table</span> <span class="o">&gt;&gt;&gt;</span> <span class="nc">.el-table__body-wrapper</span> <span class="nt">table</span> <span class="nt">thead</span><span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="nb">table-header-group</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<h2 id="优化">优化</h2>
<p>项目中用到的地方少的话可以在组件中直接书写，若广泛使用，可封装为组件，方便维护</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* el-table-p.vue */</span>
<span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">Table</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">element-ui</span><span class="dl">'</span>
<span class="k">export</span> <span class="k">default</span><span class="p">{</span>
  <span class="na">extends</span><span class="p">:</span> <span class="nx">Table</span><span class="p">,</span>
  <span class="nf">mounted</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nf">$nextTick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span> 
      <span class="kd">let</span> <span class="nx">thead</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nf">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">.el-table__header-wrapper thead</span><span class="dl">'</span><span class="p">)</span>
      <span class="kd">let</span> <span class="nx">theadNew</span> <span class="o">=</span> <span class="nx">thead</span><span class="p">.</span><span class="nf">cloneNode</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nf">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">.el-table__body-wrapper table</span><span class="dl">'</span><span class="p">).</span><span class="nf">appendChild</span><span class="p">(</span><span class="nx">theadNew</span><span class="p">)</span>
    <span class="p">})</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">style</span> <span class="nx">scoped</span><span class="o">&gt;</span>
<span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">table</span> <span class="o">&gt;&gt;&gt;</span> <span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">table__body</span><span class="o">-</span><span class="nx">wrapper</span> <span class="nx">table</span> <span class="nx">thead</span><span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="nx">none</span><span class="p">;</span>
 <span class="p">}</span>
<span class="p">@</span><span class="nd">media</span> <span class="nx">print</span> <span class="p">{</span>
  <span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">table</span> <span class="o">&gt;&gt;&gt;</span> <span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">table__header</span><span class="o">-</span><span class="nx">wrapper</span><span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="nx">none</span><span class="p">;</span>
  <span class="p">}</span>
 <span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">table</span> <span class="o">&gt;&gt;&gt;</span> <span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">table__body</span><span class="o">-</span><span class="nx">wrapper</span> <span class="nx">table</span> <span class="nx">thead</span><span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="nx">table</span><span class="o">-</span><span class="nx">header</span><span class="o">-</span><span class="nx">group</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="sr">/style</span><span class="err">&gt;
</span></code></pre></div></div>
<p>注册为全局组件：</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* main.js */</span>
<span class="k">import</span> <span class="nx">ElTableP</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./components/el-table-p.vue</span><span class="dl">'</span>
<span class="nx">Vue</span><span class="p">.</span><span class="nf">component</span><span class="p">(</span><span class="dl">'</span><span class="s1">el-table-p</span><span class="dl">'</span><span class="p">,</span> <span class="nx">ElTableP</span><span class="p">)</span>
</code></pre></div></div>
<p>使用 table 时使用自定义的组件快速方便满足需求:</p>
<pre><code class="language-HTML">&lt;!--index.js=&gt;template--&gt;
  &lt;el-table-p
    :data="tableData"
    ref="mytable"
    style="width: 800px; margin:0px auto"&gt;
    &lt;el-table-column
      prop="date"
      label="日期"
      width="180"&gt;
    &lt;/el-table-column&gt;
    &lt;el-table-column
      prop="name"
      label="姓名"
      width="180"&gt;
    &lt;/el-table-column&gt;
    &lt;el-table-column
      prop="address"
      label="地址"&gt;
    &lt;/el-table-column&gt;
  &lt;/el-table-p&gt;
</code></pre>
<p>实现了每页打印都有表头的效果</p>

<p><img src="https://less-1251975755.cos.ap-beijing.myqcloud.com/posts/2022-08-12%2011.47.17.png" alt="" /></p>

  </div>
<!-- Gitalk 评论系统 -->

<div id="gitalk-container"></div>
<script>
  const gitalk = new Gitalk({
    clientID: '',
    clientSecret: '',
    repo: 'moselikk/moselikk.github.io',
    owner: 'moselikk',
    admin: '["moselikk"]',
    id: 'https://moselikk.com/blog/ElementUI', // Ensure uniqueness and length less than 50
    distractionFreeMode: 'false' // Facebook-like distraction free mode
  })
  gitalk.render('gitalk-container')
</script>

</article>

      </div>
    </div>
  </div>
  <script>
    // open outbound links in new tab
    let origin = document.location.origin;
    let links = document.getElementsByTagName("a");
    for (let link of links) {
      if (
        link.href &&
        link.href.indexOf(origin) != 0 &&
        !link.href.includes("mailto:")
      )
        link.setAttribute("target", "_blank");
    }

    // responsive table
    let tables = document.getElementsByTagName("table");
    for (let table of tables) {
      let ths = table.tHead.rows[0].cells;
      let trs = table.tBodies[0].rows;
      for (let row of trs) {
        for (let i = 0; i < row.cells.length; i++) {
          row.cells[i].setAttribute("data-label", ths[i].textContent);
        }
      }
    }

    // hitokoto api
    const rule = ["a", "b","c","d","h","i","j","k"];
    const query = rule.map(item => `c=${item}`).join('&');

      // Function to fetch hitokoto
      function fetchHitokoto() {
      fetch(`https://v1.hitokoto.cn?${query}`)
        .then((response) => response.json())
        .then((data) => {
          const hitokoto = document.getElementById("hitokoto_text");
          hitokoto.href = "https://hitokoto.cn/?uuid=" + data.uuid;
          const from = data.from ? " -" + data.from : ''
          hitokoto.innerText = data.hitokoto + from;
          // Store the timestamp and result of the last API call
          localStorage.setItem('lastHitokotoCall', Date.now());
          localStorage.setItem('lastHitokotoResult', JSON.stringify(data));
        })
        .catch(console.error);
    }

    // Function to use the last hitokoto result
    function useLastHitokotoResult() {
      const data = JSON.parse(localStorage.getItem('lastHitokotoResult'));
      const hitokoto = document.getElementById("hitokoto_text");
      hitokoto.href = "https://hitokoto.cn/?uuid=" + data.uuid;
      hitokoto.innerText = data.hitokoto;
    }

    // Check if we can call the API
    function canCallHitokoto() {
      const lastCall = localStorage.getItem('lastHitokotoCall');
      const now = Date.now();
      // Check if the last call was more than a minute ago
      return !lastCall || now - lastCall > 60 * 1000;
    }

    // Main logic
    if (canCallHitokoto()) {
      fetchHitokoto();
    } else {
      const lastResult = localStorage.getItem('lastHitokotoResult');
      if (lastResult) {
        useLastHitokotoResult();
      } else {
        fetchHitokoto();
      }
    }
  </script>
  <!-- <script src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon='{"token": ""}'
    onerror="gtag('set', 'user_properties', {blocker: 'true'});"></script> -->
  <script src="/js/zooming.min.js"></script>
  <script>
    if (window.Zooming && typeof screen.orientation == "undefined")
      window.addEventListener("load", function () {
        new Zooming().listen(".post-content img");
      });
  </script>
  <script src="../js/denglong.js"></script>
</body>

</html>