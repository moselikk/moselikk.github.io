<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <title>
    使用 scp 上传文件至远程服务器
  </title>
  <meta
    name="description"
    content="最近买了台轻量服务器，打算部署一些 node 服务，有了向远程服务器传输文件的需求，经过了解，有 ftp 的方法也有通过命令scp直接传输的方法，经过学习，了解了 scp 的基本使用，作此记录，以备查询。scp 是 secure copy 的缩写，相当于 cp 命令 + SSH。它的底层是 SSH 协议，默认端口..."
  />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link
    rel="canonical"
    href="https://moselikk.com/blog/scp"
  />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
  <link rel="stylesheet" href="/css/main.css">
  <link rel="alternate" type="application/rss+xml" title="moselikk"
  href="https://moselikk.com/feed.xml">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>使用 scp 上传文件至远程服务器 | moselikk</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="使用 scp 上传文件至远程服务器" />
<meta name="author" content="Moselikk" />
<meta property="og:locale" content="zh_cmn_Hans" />
<meta name="description" content="最近买了台轻量服务器，打算部署一些 node 服务，有了向远程服务器传输文件的需求，经过了解，有 ftp 的方法也有通过命令scp直接传输的方法，经过学习，了解了 scp 的基本使用，作此记录，以备查询。 scp 是 secure copy 的缩写，相当于 cp 命令 + SSH。它的底层是 SSH 协议，默认端口是 22，相当于先使用 ssh 命令登录远程主机，然后再执行拷贝操作。 scp 主要用于以下三种复制操作。 本地复制到远程。 远程复制到本地。 两个远程系统之间的复制。 使用 scp 传输数据时，文件和密码都是加密的，不会泄漏敏感信息。 上传本地文件至服务器 scp /path/filename username@servername:/path #（远程目标目录，必须存在且有读写权限） 上传本地目录至服务器 scp -r local_dir username@servername:remote_dir # 上传或下载的目标为目录，需要加 -r scp 会进行递归 从服务器上下载文件 scp username@servername:/path/filename /Users/mac/Desktop #（本地目标目录） 从服务器上下载目录 scp -r username@servername:/root/ /Users/mac/Desktop #（本地目标目录） SOME TIPS: ( Ubuntu Server 20.04 LTS 64bit ) 出现 Permission denied, please try again 的错误 远程端修改 sshd_config 文件 sudo vim /etc/ssh/sshd_config # 注释掉 PermitRootLogin prohibit-password # 添加 PermitRootLogin yes 重启 ssh 服务 sudo /etc/init.d/ssh restart 如果提示权限问题，可根据是上传还是下载，更改相应路径权限 sudo chmod 777 /path # path 更改为更改为对应操作路径" />
<meta property="og:description" content="最近买了台轻量服务器，打算部署一些 node 服务，有了向远程服务器传输文件的需求，经过了解，有 ftp 的方法也有通过命令scp直接传输的方法，经过学习，了解了 scp 的基本使用，作此记录，以备查询。 scp 是 secure copy 的缩写，相当于 cp 命令 + SSH。它的底层是 SSH 协议，默认端口是 22，相当于先使用 ssh 命令登录远程主机，然后再执行拷贝操作。 scp 主要用于以下三种复制操作。 本地复制到远程。 远程复制到本地。 两个远程系统之间的复制。 使用 scp 传输数据时，文件和密码都是加密的，不会泄漏敏感信息。 上传本地文件至服务器 scp /path/filename username@servername:/path #（远程目标目录，必须存在且有读写权限） 上传本地目录至服务器 scp -r local_dir username@servername:remote_dir # 上传或下载的目标为目录，需要加 -r scp 会进行递归 从服务器上下载文件 scp username@servername:/path/filename /Users/mac/Desktop #（本地目标目录） 从服务器上下载目录 scp -r username@servername:/root/ /Users/mac/Desktop #（本地目标目录） SOME TIPS: ( Ubuntu Server 20.04 LTS 64bit ) 出现 Permission denied, please try again 的错误 远程端修改 sshd_config 文件 sudo vim /etc/ssh/sshd_config # 注释掉 PermitRootLogin prohibit-password # 添加 PermitRootLogin yes 重启 ssh 服务 sudo /etc/init.d/ssh restart 如果提示权限问题，可根据是上传还是下载，更改相应路径权限 sudo chmod 777 /path # path 更改为更改为对应操作路径" />
<link rel="canonical" href="https://moselikk.com/blog/scp" />
<meta property="og:url" content="https://moselikk.com/blog/scp" />
<meta property="og:site_name" content="moselikk" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-11-12T21:25:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="使用 scp 上传文件至远程服务器" />
<meta name="google-site-verification" content="" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Moselikk"},"dateModified":"2022-11-12T21:25:00+08:00","datePublished":"2022-11-12T21:25:00+08:00","description":"最近买了台轻量服务器，打算部署一些 node 服务，有了向远程服务器传输文件的需求，经过了解，有 ftp 的方法也有通过命令scp直接传输的方法，经过学习，了解了 scp 的基本使用，作此记录，以备查询。 scp 是 secure copy 的缩写，相当于 cp 命令 + SSH。它的底层是 SSH 协议，默认端口是 22，相当于先使用 ssh 命令登录远程主机，然后再执行拷贝操作。 scp 主要用于以下三种复制操作。 本地复制到远程。 远程复制到本地。 两个远程系统之间的复制。 使用 scp 传输数据时，文件和密码都是加密的，不会泄漏敏感信息。 上传本地文件至服务器 scp /path/filename username@servername:/path #（远程目标目录，必须存在且有读写权限） 上传本地目录至服务器 scp -r local_dir username@servername:remote_dir # 上传或下载的目标为目录，需要加 -r scp 会进行递归 从服务器上下载文件 scp username@servername:/path/filename /Users/mac/Desktop #（本地目标目录） 从服务器上下载目录 scp -r username@servername:/root/ /Users/mac/Desktop #（本地目标目录） SOME TIPS: ( Ubuntu Server 20.04 LTS 64bit ) 出现 Permission denied, please try again 的错误 远程端修改 sshd_config 文件 sudo vim /etc/ssh/sshd_config # 注释掉 PermitRootLogin prohibit-password # 添加 PermitRootLogin yes 重启 ssh 服务 sudo /etc/init.d/ssh restart 如果提示权限问题，可根据是上传还是下载，更改相应路径权限 sudo chmod 777 /path # path 更改为更改为对应操作路径","headline":"使用 scp 上传文件至远程服务器","mainEntityOfPage":{"@type":"WebPage","@id":"https://moselikk.com/blog/scp"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://moselikk.com/apple-touch-icon.png"},"name":"Moselikk"},"url":"https://moselikk.com/blog/scp"}</script>
<!-- End Jekyll SEO tag -->

  <script>

  </script>
  <script>
  </script>
</head>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-K329WMFD');</script>
  <!-- End Google Tag Manager -->
<body>
  <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K329WMFD"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
  <div class="outer">
    <div class="page-content" id="article">
      <div class="wrapper">
        <div id="hitokoto" class="hitokoto">
          <a href="#" id="hitokoto_text">...... </a>
        </div>
        <div class="hanging-drop">
        </div>
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
      <header class="post-header">
    <h1 class="post-title" itemprop="name headline">使用 scp 上传文件至远程服务器</h1>
    <p class="post-meta">
      <span><svg width="10px" height="10px" style="fill: #888; margin-right: 5px; vertical-align: baseline;" viewBox="0 0 16 16"><path d="M2.06 6.69c.14-.4.5-.69.94-.69h11V5c0-.55-.45-1-1-1H6.41l-1.7-1.71A.997.997 0 0 0 4 2H1c-.55 0-1 .45-1 1v9.84l2.05-6.15h.01zM16 8c0-.55-.45-1-1-1H4a.99.99 0 0 0-.94.69l-2 6c-.04.09-.06.2-.06.31 0 .55.45 1 1 1h11c.44 0 .81-.29.94-.69l2-6c.04-.09.06-.2.06-.31z"></path></svg>
      <time datetime="2022-11-12T21:25:00+08:00" itemprop="datePublished">Nov 12, 2022</time></span>
      <a href="/"><span><svg width="10px" height="10px" style="fill: #888; margin-right: 5px; vertical-align: baseline;" viewBox="0 0 16 16"><path d="M1 3h14c.55 0 1-.45 1-1s-.45-1-1-1H1c-.55 0-1 .45-1 1s.45 1 1 1zm14 10H1c-.55 0-1 .45-1 1s.45 1 1 1h14c.55 0 1-.45 1-1s-.45-1-1-1zm0-4H1c-.55 0-1 .45-1 1s.45 1 1 1h14c.55 0 1-.45 1-1s-.45-1-1-1zm0-4H1c-.55 0-1 .45-1 1s.45 1 1 1h14c.55 0 1-.45 1-1s-.45-1-1-1z"></path></svg>Home</span></a>
      <a href="mailto:moselikk@gmail.com"><span><svg width="10px" height="10px" style="fill: #888; margin-right: 5px; vertical-align: baseline;" viewBox="0 0 16 16"><path d="M6 10c-1.1 0-2-.9-2-2V3H1c-.55 0-1 .45-1 1v8c0 .55.45 1 1 1v2a1.003 1.003 0 0 0 1.71.71L5.41 13H10c.55 0 1-.45 1-1v-1.17l-.83-.83H6zm9-10H6c-.55 0-1 .45-1 1v7c0 .55.45 1 1 1h4.59l2.71 2.71c.17.18.42.29.7.29.55 0 1-.45 1-1V9c.55 0 1-.45 1-1V1c0-.55-.45-1-1-1z"></path></svg>Email</span></a>
      <a href="https://github.com/moselikk"><span><svg width="10px" height="10px" style="fill: #888; margin-right: 5px; vertical-align: baseline;" viewBox="0 0 16 16"><path d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>Github</span></a>
      <a href="/excerpt"><span><svg width="10px" height="10px" style="fill: #888; margin-right: 5px; vertical-align: baseline;" viewBox="0 0 16 16"><path d="M11 11c-.28 0-.53.11-.71.29L9 12.59V8c0-.55-.45-1-1-1s-1 .45-1 1v4.59L5.71 11.3A.965.965 0 0 0 5 11a1.003 1.003 0 0 0-.71 1.71l3 3c.18.18.43.29.71.29s.53-.11.71-.29l3-3A1.003 1.003 0 0 0 11 11zm1-7c-.03 0-.07 0-.1.01A5 5 0 0 0 2 5c0 .11.01.22.02.33A3.51 3.51 0 0 0 0 8.5c0 1.41.84 2.61 2.03 3.17C2.2 10.17 3.46 9 5 9c.06 0 .13.02.19.02C5.07 8.7 5 8.36 5 8c0-1.66 1.34-3 3-3s3 1.34 3 3c0 .36-.07.7-.19 1.02.06 0 .13-.02.19-.02 1.48 0 2.7 1.07 2.95 2.47A3.964 3.964 0 0 0 16 8c0-2.21-1.79-4-4-4z"></path></svg>Excerpt</span></a>
      <a href="/about"><span><svg xmlns="http://www.w3.org/2000/svg" width="10px" height="10px" style="fill: #888; margin-right: 5px; vertical-align: baseline;" viewBox="0 0 16 16"><!-- Icon from Tabler Icons by Paweł Kuna - https://github.com/tabler/tabler-icons/blob/master/LICENSE --><path fill="currentColor" d="M18.333 2c1.96 0 3.56 1.537 3.662 3.472l.005.195v12.666c0 1.96-1.537 3.56-3.472 3.662l-.195.005H5.667a3.667 3.667 0 0 1-3.662-3.472L2 18.333V5.667c0-1.96 1.537-3.56 3.472-3.662L5.667 2zM6 15a1 1 0 0 0-1 1v2l.007.117A1 1 0 0 0 7 18v-2l-.007-.117A1 1 0 0 0 6 15m3-4a1 1 0 0 0-1 1v6l.007.117A1 1 0 0 0 10 18v-6l-.007-.117A1 1 0 0 0 9 11m3 2a1 1 0 0 0-1 1v4l.007.117A1 1 0 0 0 13 18v-4l-.007-.117A1 1 0 0 0 12 13"/></svg>About</span></a>
    </p>
  </header>


  

  <div class="post-content" itemprop="articleBody">
    <p>最近买了台轻量服务器，打算部署一些 node 服务，有了向远程服务器传输文件的需求，经过了解，有 ftp 的方法也有通过命令scp直接传输的方法，经过学习，了解了 scp 的基本使用，作此记录，以备查询。</p>

<p>scp 是 secure copy 的缩写，相当于 cp 命令 + SSH。它的底层是 SSH 协议，默认端口是 22，相当于先使用 ssh 命令登录远程主机，然后再执行拷贝操作。</p>

<p>scp 主要用于以下三种复制操作。</p>

<p>本地复制到远程。
远程复制到本地。
两个远程系统之间的复制。
使用 scp 传输数据时，文件和密码都是加密的，不会泄漏敏感信息。</p>

<ol>
  <li>上传本地文件至服务器</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scp /path/filename username@servername:/path <span class="c">#（远程目标目录，必须存在且有读写权限）</span>
</code></pre></div></div>

<ol>
  <li>上传本地目录至服务器</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scp <span class="nt">-r</span> local_dir username@servername:remote_dir

<span class="c"># 上传或下载的目标为目录，需要加 -r scp 会进行递归</span>
</code></pre></div></div>

<ol>
  <li>从服务器上下载文件</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scp username@servername:/path/filename /Users/mac/Desktop <span class="c">#（本地目标目录）</span>
</code></pre></div></div>

<ol>
  <li>从服务器上下载目录</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scp <span class="nt">-r</span> username@servername:/root/ /Users/mac/Desktop <span class="c">#（本地目标目录）</span>
</code></pre></div></div>
<hr />

<blockquote>
  <p><strong>SOME TIPS: ( Ubuntu Server 20.04 LTS 64bit )</strong></p>
</blockquote>

<p><em>出现 Permission denied, please try again 的错误</em></p>

<ul>
  <li>远程端修改 sshd_config 文件</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>vim /etc/ssh/sshd_config

<span class="c"># 注释掉 PermitRootLogin prohibit-password</span>
<span class="c"># 添加 PermitRootLogin yes</span>
</code></pre></div></div>
<ul>
  <li>重启 ssh 服务</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo</span> /etc/init.d/ssh restart
</code></pre></div></div>

<ul>
  <li>如果提示权限问题，可根据是上传还是下载，更改相应路径权限</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo chmod </span>777 /path

<span class="c"># path 更改为更改为对应操作路径</span>
</code></pre></div></div>


  </div>
<!-- Gitalk 评论系统 -->

<div id="gitalk-container"></div>
<script>
  const gitalk = new Gitalk({
    clientID: '',
    clientSecret: '',
    repo: 'moselikk/moselikk.github.io',
    owner: 'moselikk',
    admin: '["moselikk"]',
    id: 'https://moselikk.com/blog/scp', // Ensure uniqueness and length less than 50
    distractionFreeMode: 'false' // Facebook-like distraction free mode
  })
  gitalk.render('gitalk-container')
</script>

</article>

      </div>
    </div>
  </div>
  <script>
    // open outbound links in new tab
    let origin = document.location.origin;
    let links = document.getElementsByTagName("a");
    for (let link of links) {
      if (
        link.href &&
        link.href.indexOf(origin) != 0 &&
        !link.href.includes("mailto:")
      )
        link.setAttribute("target", "_blank");
    }

    // responsive table
    let tables = document.getElementsByTagName("table");
    for (let table of tables) {
      let ths = table.tHead.rows[0].cells;
      let trs = table.tBodies[0].rows;
      for (let row of trs) {
        for (let i = 0; i < row.cells.length; i++) {
          row.cells[i].setAttribute("data-label", ths[i].textContent);
        }
      }
    }

    // hitokoto api
    const rule = ["a", "b","c","d","h","i","j","k"];
    const query = rule.map(item => `c=${item}`).join('&');

      // Function to fetch hitokoto
      function fetchHitokoto() {
      fetch(`https://v1.hitokoto.cn?${query}`)
        .then((response) => response.json())
        .then((data) => {
          const hitokoto = document.getElementById("hitokoto_text");
          hitokoto.href = "https://hitokoto.cn/?uuid=" + data.uuid;
          const from = data.from ? " -" + data.from : ''
          hitokoto.innerText = data.hitokoto + from;
          // Store the timestamp and result of the last API call
          localStorage.setItem('lastHitokotoCall', Date.now());
          localStorage.setItem('lastHitokotoResult', JSON.stringify(data));
        })
        .catch(console.error);
    }

    // Function to use the last hitokoto result
    function useLastHitokotoResult() {
      const data = JSON.parse(localStorage.getItem('lastHitokotoResult'));
      const hitokoto = document.getElementById("hitokoto_text");
      hitokoto.href = "https://hitokoto.cn/?uuid=" + data.uuid;
      hitokoto.innerText = data.hitokoto;
    }

    // Check if we can call the API
    function canCallHitokoto() {
      const lastCall = localStorage.getItem('lastHitokotoCall');
      const now = Date.now();
      // Check if the last call was more than a minute ago
      return !lastCall || now - lastCall > 60 * 1000;
    }

    // Main logic
    if (canCallHitokoto()) {
      fetchHitokoto();
    } else {
      const lastResult = localStorage.getItem('lastHitokotoResult');
      if (lastResult) {
        useLastHitokotoResult();
      } else {
        fetchHitokoto();
      }
    }
  </script>
  <!-- <script src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon='{"token": ""}'
    onerror="gtag('set', 'user_properties', {blocker: 'true'});"></script> -->
  <script src="/js/zooming.min.js"></script>
  <script>
    if (window.Zooming && typeof screen.orientation == "undefined")
      window.addEventListener("load", function () {
        new Zooming().listen(".post-content img");
      });
  </script>
  <script src="../js/denglong.js"></script>
</body>

</html>